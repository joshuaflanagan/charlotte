<!DOCTYPE html>
<html>
  <head>
    <title>Charlotte</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <div id="buildsScreen">
      <form action="#" class="addBuild">
        <input type="text" data-bind="value: urlToAdd" class="jobUrl" placeholder="Job Url" />
        <input type="text" data-bind="value: pollingForBuild" class="frequency" placeholder="Job Url" />
        <a href="#" data-bind="click: addBuild" class="add">&#43;</a>
      </form>

      <div class="build-display" data-bind="foreach: builds">
        <div class="build" data-bind="css: {
          good: status() == 'SUCCESS',
          bad: status() == 'FAILURE',
          building: building()
          }">
          <div data-bind="visible: pollingError">
            <h3>Error connecting to the CI server</h3>
            <a href="#" data-bind="click: retrieve">Retry</a>
          </div>

          <div data-bind="visible: pollingError() === false">
            <h2 data-bind="text: name"></h2>
            <h3 class="description" data-bind="text: description"></h3>
            <a href="#" class="remove" data-bind="click: $root.removeBuild">&times;</a>
            <!-- <span data-bind="text: lastChecked"></span>-->
            <div class="build-progress" style="display: none;" data-bind="visible: building()">
              <p>
                Build started:
                <span data-bind="text: buildStarted().formatted()"></span>
              </p>
              <p>
                Expected finish:
                <span data-bind="text: buildEstimate().formatted()"></span>
              </p>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <section>
          <p>State updated: <span data-bind="text: lastUpdate"></span></p>
        </section>
        <section>
          <p><span data-bind="text: currentTime"></span></p>
        </section>
      </footer>
    </div>

  </body>

  <script src="jquery.min.js"></script>
  <script src="knockout.min.js"></script>
  <script src="charlotte.js"></script>
  <script>
    var vm = new CharlotteViewModel();
    ko.applyBindings(vm);
  </script>
</html>
